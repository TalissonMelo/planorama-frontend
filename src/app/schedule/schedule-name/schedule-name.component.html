<div class="container">
    <div class="back-link" routerLink="/"> <mat-icon>arrow_back</mat-icon> Voltar</div>
    <h2>Agendas</h2>
    <!-- *ngIf="userPermissions && userPermissions.isValid()"  -->
    <div class="form-container">
        <div class="form-group row">
            <div class="row">
            <div class="col-sm-8">
                <label for="name">Nome:</label>
                <input type="text" id="name" name="name" [(ngModel)]="schedule.name"
                    class="my-custom-form-control form-control">
            </div>
            <div class="col-sm-2">
                <label for="startTime">Horário Inicial:</label>
                <input type="time" id="startTime" name="startTime" [(ngModel)]="schedule.startTime"
                    class="my-custom-form-control form-control">
            </div>
            <div class="col-sm-2">
                <label for="endTime">Horário Final:</label>
                <input type="time" id="endTime" name="endTime" [(ngModel)]="schedule.endTime"
                    class="my-custom-form-control form-control">
            </div>
        </div>
        </div>
        <button type="button" (click)="save()" class="my-custom-ok-button">Adicionar Agenda</button>
    </div>
    <div class="table-responsive pt-3">
        <table class="table table-bordered schedule-table">
            <thead>
                <tr>
                    <th class="col-6">Nome</th>
                    <th class="col-2">Horário Inicial</th>
                    <th class="col-2">Horário Final</th>
                    <th class="col-2">Ações</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let schedule of schedules">
                    <td *ngIf="editSchedule != schedule.id" class="col-6">{{ schedule.name }}</td>
                    <td *ngIf="editSchedule != schedule.id" class="col-2">{{ schedule.startTime }}</td>
                    <td *ngIf="editSchedule != schedule.id" class="col-2">{{ schedule.endTime }}</td>
                    <td *ngIf="editSchedule == schedule.id" class="col-6"> <input type="text" id="name" name="name"
                            [(ngModel)]="schedule.name" class="my-custom-form-control form-control"></td>
                    <td *ngIf="editSchedule == schedule.id" class="col-2"> <input type="time" id="startTime"
                            name="startTime" [(ngModel)]="schedule.startTime"
                            class="my-custom-form-control form-control"></td>
                    <td *ngIf="editSchedule == schedule.id" class="col-2"><input type="time" id="endTime" name="endTime"
                            [(ngModel)]="schedule.endTime" class="my-custom-form-control form-control"></td>
                    <td *ngIf="editSchedule != schedule.id" class="col-2 text-center  action-icons align-middle">
                        <button mat-icon-button color="primary" (click)="listSessionsByScheduleId(schedule)">
                            <mat-icon>visibility</mat-icon>
                        </button>
                        <!-- *ngIf="schedule.ownerId === userId" -->
                        <button  mat-icon-button color="accent"
                            (click)="listMembersByScheduleId(schedule)">
                            <mat-icon>group</mat-icon>
                        </button>
                        <!-- *ngIf="schedule.ownerId === userId" -->
                        <button  mat-icon-button color="primary"
                            (click)="edit(schedule.id)">
                            <mat-icon>edit</mat-icon>
                        </button>
                        <!-- *ngIf="schedule.ownerId === userId"  -->
                        <button mat-icon-button color="warn"
                            (click)="deleted(schedule)">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </td>
                    <td *ngIf="editSchedule == schedule.id" class="col-3 text-center  action-icons align-middle">
                        <button mat-icon-button color="warn" (click)="update(schedule)">
                            <mat-icon>save</mat-icon>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>